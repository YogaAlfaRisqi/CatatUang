model Category {
  id                    String                 @id @default(cuid())
  userId                String?
  name                  String
  slug                  String
  icon                  String?
  color                 String?
  type                  CategoryType
  isSystem              Boolean                @default(false)
  isActive              Boolean                @default(true)
  parentId              String?
  position              Int                    @default(0)
  createdAt             DateTime               @default(now())
  updatedAt             DateTime               @updatedAt
  deletedAt             DateTime?
  budgets               Budget[]
  parent                Category?              @relation("CategoryHierarchy", fields: [parentId], references: [id])
  children              Category[]             @relation("CategoryHierarchy")
  user                  User?                  @relation(fields: [userId], references: [id], onDelete: Cascade)
  recurringTransactions RecurringTransaction[]
  transactions          Transaction[]

  @@unique([userId, slug])
  @@index([userId])
  @@index([type])
  @@index([isSystem])
  @@index([parentId])
  @@map("categories")
  @@schema("category")
}
