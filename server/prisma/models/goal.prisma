model Goal {
  id                String      @id @default(cuid())
  userId            String
  
  title             String
  description       String?     @db.Text
  icon              String?     // Icon or emoji
  color             String?
  
  targetAmount      Decimal     @db.Decimal(15, 2)
  currentAmount     Decimal     @db.Decimal(15, 2) @default(0)
  currency          Currency    @default(IDR)
  
  startDate         DateTime    @default(now())
  deadline          DateTime?
  
  status            GoalStatus  @default(ACTIVE)
  
  // Progress milestones (optional)
  milestones        Json?       // Array of milestone percentages
  
  // Auto-save settings
  autoSaveEnabled   Boolean     @default(false)
  autoSaveAmount    Decimal?    @db.Decimal(15, 2)
  autoSaveFrequency RecurrenceFrequency?
  
  completedAt       DateTime?
  
  createdAt         DateTime    @default(now())
  updatedAt         DateTime    @updatedAt
  deletedAt         DateTime?

  // Relations
  user              User        @relation(fields: [userId], references: [id], onDelete: Cascade)
  contributions     GoalContribution[]

  @@index([userId])
  @@index([status])
  @@index([deadline])
  @@map("goals")
}

model GoalContribution {
  id                String      @id @default(cuid())
  goalId            String
  
  amount            Decimal     @db.Decimal(15, 2)
  notes             String?
  
  contributedAt     DateTime    @default(now())

  // Relations
  goal              Goal        @relation(fields: [goalId], references: [id], onDelete: Cascade)

  @@index([goalId])
  @@index([contributedAt])
  @@map("goal_contributions")
}