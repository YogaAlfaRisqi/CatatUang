model Budget {
  id                String      @id @default(cuid())
  userId            String
  categoryId        String?     // NULL = overall budget
  
  name              String?     // Optional budget name
  amountLimit       Decimal     @db.Decimal(15, 2)
  currency          Currency    @default(IDR)
  
  // Period
  startDate         DateTime
  endDate           DateTime
  
  // Alerts
  alertThreshold    Int         @default(80) // Alert at 80%
  hasAlerted        Boolean     @default(false)
  
  // Rolling budget (auto-renew)
  isRolling         Boolean     @default(false)
  rollingFrequency  RecurrenceFrequency?
  
  isActive          Boolean     @default(true)
  
  createdAt         DateTime    @default(now())
  updatedAt         DateTime    @updatedAt
  deletedAt         DateTime?

  // Relations
  user              User        @relation(fields: [userId], references: [id], onDelete: Cascade)
  category          Category?   @relation(fields: [categoryId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([categoryId])
  @@index([startDate, endDate])
  @@index([isActive])
  @@map("budgets")
}
