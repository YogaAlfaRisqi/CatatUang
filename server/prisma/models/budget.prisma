model Budget {
  id               String               @id @default(cuid())
  userId           String
  categoryId       String?
  name             String?
  amountLimit      Decimal              @db.Decimal(15, 2)
  currency         Currency             @default(IDR)
  startDate        DateTime
  endDate          DateTime
  alertThreshold   Int                  @default(80)
  hasAlerted       Boolean              @default(false)
  isRolling        Boolean              @default(false)
  rollingFrequency RecurrenceFrequency?
  isActive         Boolean              @default(true)
  createdAt        DateTime             @default(now())
  updatedAt        DateTime             @updatedAt
  deletedAt        DateTime?
  category         Category?            @relation(fields: [categoryId], references: [id], onDelete: Cascade)
  user             User                 @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([categoryId])
  @@index([startDate, endDate])
  @@index([isActive])
  @@map("budgets")
  @@schema("budget")
}
